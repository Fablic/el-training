<div class="container_admin_users">
  <% content_for(:title, I18n.t('admin.users.index.title')) %>
  <h1><%= I18n.t('admin.users.index.title') %></h1>
  ログインユーザID：<%= @login_user.login_id %>
  <hr>
  <div id="users_list">
    <table>
      <!-- テーブルヘッダ -->
      <thead>
      <tr>
        <th class="no">No</th>
        <th class="login_id"><%= I18n.t('admin.users.header.login_id') %></th>
        <th class="password"><%= I18n.t('admin.users.header.password') %></th>
        <th class="name"><%= I18n.t('admin.users.header.name') %></th>
        <th class="authority"><%= I18n.t('admin.users.header.authority') %></th>
        <th class="task_count"><%= I18n.t('admin.users.header.task') %></th>
        <th class="edit_user"><%= I18n.t('admin.users.header.edit_user') %></th>
        <th class="delete"><%= I18n.t('admin.users.header.delete') %></th>
      </tr>
      </thead>

      <!-- テーブルボディ -->
      <tbody>
      <% i = 0 %>
      <% @users.each do |user| %>
        <tr>
          <td class="no"><%= i += 1 %></td>
          <td class="login_id"><%= user.login_id %></td>
          <td class="password"><%= user.password %></td>
          <td class="name"><%= user.name %></td>
          <td class="authority"><%= user.authority.name %></td>
          <td class="task_count">
            <%= link_to user.tasks.ids.count,
                        admin_user_path(user),
                        { onclick: "window.open(this.href,
                                   'new_window_#{user.id}',
                                   'height=600px, width=1000px');
                                   return false;",
                          id: "show_user_link_#{user.id}"
                        } %>
          </td>
          <td class="edit_user"><%= link_to image_tag('admin/users/edit_icon.png', class: 'icon edit_user_icon'),
                                            edit_admin_user_path(user),
                                            { id: "edit_user_link_#{user.id}" } %>
          </td>
          <td class="delete"><%= link_to image_tag('admin/users/delete_icon.png', class: 'icon delete_icon'),
                                         admin_user_path(user),
                                         { method: :delete,
                                           data: { confirm: I18n.t('admin.users.index.confirm_delete') },
                                           id: "delete_user_link_#{user.id}"
                                         } %>
          </td>
        </tr>
      <% end %>
      </tbody>
    </table>
    <br>
    <%= paginate @users %>
  </div>
  <hr>
  <%= link_to I18n.t('admin.users.footer.new'), new_admin_user_path %>
  <hr>
  <%= link_to I18n.t('admin.users.footer.tasks'), tasks_path %>
  <hr>
  <%= button_to I18n.t('layouts.common.logout'), logout_path(@login_user),
                { method: :delete,
                  data: { confirm: I18n.t('layouts.common.confirm_logout'),
                          disable_with: I18n.t('layouts.common.load_logout') }
                } %>
</div>
