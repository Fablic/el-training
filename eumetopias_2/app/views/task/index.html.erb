<h1>タスク一覧</h1>
<p>
<% flash.each do |name, msg| %>
<%= content_tag :div, msg, class: name  %>
<% end %>
</p>
<%= form_with url: root_path, method: :get, local: true do |form| %>
  <%= form.label 'status' %>
  <%= form.select :task_status_id, @status_selection, selected: params[:task_status_id] || '' %>
  <%= form.submit '検索' %>
<% end %>
<table>
  <tr>
    <th>Title</th>
    <th>Description</th>
    <th>Status</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>
  <% @task.each do |task| %>
  <tr>
    <th><%= task.title %></th>
    <th><%= task.description %></th>
    <th>
      <% if task_status = task.task_status %>
        <%= task_status.name %>
      <% else %>
        <%= '-' %>
      <% end %>
    </th>
    <th><%= link_to 'show', task_path(task) %></th>
    <th><%= link_to 'edit', edit_task_path(task) %></th>
    <th><%= link_to 'destroy', task_path(task), method: :delete, data:{ confirm: 'Are you sure?'} %></th>
  <tr>
  <% end %>
</table>
<%= link_to 'new', new_task_path %>
