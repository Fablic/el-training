<h1><%= t ".title" %></h1>

<%= link_to t("actions.new"), new_list_path %>

<% flash.each do |key, value| %>
  <%= content_tag(:div, value, class: "#{key}") %>
<% end %>

<p>検索</p>
<%= form_tag(list_index_path, :method => 'get' ) do %>
  <%= label_tag t "attributes.task.task_name" %>
  <%= text_field_tag :task_name, value = params[:task_name] %>

  <%= label_tag t "attributes.task.status" %>
  <%= select_tag :status, options_for_select(Task.statuses.map { |k| [t("enum.task.status.#{k[0]}"), k[0]] }, :selected => params[:status] ), :include_blank => true %>
  <%= submit_tag t("actions.search"), :status => nil %>
<% end %>

<table border="1">
  <tr>
    <th><%= t "attributes.task.task_name" %></th>
    <th><%= t "attributes.task.description" %></th>
    <th><%= t "attributes.task.label.other" %></th>
    <th><%= t "attributes.task.deadline" %></th>
    <th><%= t "attributes.task.priority" %></th>
    <th><%= t "attributes.task.status" %></th>
    <th><%= t "actions.edit" %></th>
    <th><%= t "actions.delete" %></th>
  </tr>
  <% @tasks.each do |t| %>
    <tr>
      <td><%= t.task_name %></td>
      <td><%= description_message(t.description) %></td>
      <td>
        <% t.task_label.each do |l| %>
          <%= label_message(l.label.label_name) %>
        <% end %>
      </td>
      <td><%= l(t.deadline, format: :short) if t.deadline? %></td>
      <td><%= task_priority_message(t.priority) %></td>
      <td><%= task_status_message(t.status) %></td>
      <td><%= link_to t("actions.edit"), edit_list_path(id: t.id) %></td>
      <td><%= link_to t("actions.delete"), list_path(id: t.id), :method=>'delete', data: {confirm: t("messages.task_delete_confirm", :name => t.task_name) }%></td>
    </tr>
  <% end %>
</table>
