<h3><%= I18n.t('actions_with_model.index', model_name: Task.model_name.human) %></h3>

<%= form_with url: root_path, method: 'get', local: true, class: 'form-inline mb-3' do |form| %>
  <%= form.text_field :name, placeholder: 'タスク名を入力', value: params[:name], class: 'form-control mr-2 col-5 col-sm-4 col-md-3 col-lg-2 col-xl-2' %>
  <%= form.select :status, Task.statuses.map { |key, _| [I18n.t("enums.task.status.#{key}"), key] }, selected: params[:status], include_blank: '指定しない' %>
  <%= form.submit I18n.t('words.search'), class: 'btn btn-primary btn-sm ml-2' %>
<% end %>


<div class="task-pagination">
  <%= paginate @tasks %>
  <%= page_entries_info @tasks %>
</div>

<table class="table table-bordered table-hover">
  <thead>
    <tr>
      <th><%= Task.human_attribute_name(:name) %></th>
      <th><%= Task.human_attribute_name(:description) %></th>
      <th><%= Task.human_attribute_name(:status) %></th>
      <th><%= Task.human_attribute_name(:priority) %><%= sort_link(:priority) %></th>
      <th><%= Task.human_attribute_name(:due_date) %><%= sort_link(:due_date) %></th>
      <th><%= Task.human_attribute_name(:created_at) %><%= sort_link(:created_at) %></th>
      <th>アクション</th>
    </tr>
  </thead>
  <tbody>
    <% @tasks.each do |task| %>
      <tr>
        <td><%= task.name %></td>
        <td><%= simple_format(task.description, class: 'mb-0') %></td>
        <td><%= I18n.t("enums.task.status.#{task.status}") %></td>
        <td><%= I18n.t("enums.task.priority.#{task.priority}") %></td>
        <td><%= I18n.l(task.due_date, format: :short) %></td>
        <td><%= I18n.l(task.created_at, format: :long) %></td>
        <td>
          <%= link_to I18n.t('actions.edit'), edit_task_path(task) %>
          <%= link_to I18n.t('actions.destroy'), task_path(task), method: :delete,
              data: { confirm: I18n.t(:dialog, target: "#{Task.model_name.human}「#{task.name}」", action: I18n.t('actions.destroy')) } %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
