<%= form_with model: @task, method: target_method do |form| %>
  <div>
    <%= form.label(:name) %>
    <%= form.text_field :name %>
  </div>
  <div>
    <%= form.label(:description) %>
    <%= form.text_field :description %>
  </div>
  <div>
    <%= form.label(:status) %>
    <%= form.select(:status, Task::STATUSES.map{|k,v| [v,k.to_s]}, selected: status_option(@task)) %>
  </div>
  <div>
    <%= form.label(:target_date) %>
    <%= form.date_select(:target_date) %>
  </div>
  <div>
    <%= form.label I18n.t('view.label.self') %>
    <% @labels.map{|label| [label.id.to_s, label.name]}.each do |id, name| %>
      <%= form.check_box :attach_labels, { multiple: true, checked: attached_label?(@task, id) }, id, nil %>
      <%= name %>
    <% end %>
  </div>
  <%= form.submit "#{action_label}" %>
<% end %>
