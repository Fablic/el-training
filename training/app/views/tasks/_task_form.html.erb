<%= form_for(@task) do |f| %>

  <% if @task.errors.any?%>
    <div>
      <ul>
      <% @task.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <%= f.hidden_field :user_id, :value => current_user.id %>

  <%= f.label :name %>
  <%= f.text_field :name %>
  <br/>

  <%= f.label :description %>
  <%= f.text_area :description %>
  <br/>

  <%= f.label :status %>
  <%= f.select :status, Task.statuses.map { |k, v| [I18n.t("tasks.model.status.#{k}"), v] }, selected: @task.status_before_type_cast %>
  <br/>

  <%= f.label :priority %>
  <%= f.select :priority, Task.priorities.map { |k, v| [I18n.t("tasks.model.priority.#{k}"), v] }, selected: @task.priority_before_type_cast %>
  <br/>

  <%= f.label :end_date %>
  <%= f.date_select :end_date %>
  <br/>

  <%= f.label :label_id %>
  <%= f.collection_select :label_id, Label.all, :id, :name, include_blank: true %>
  <br/>

  <% if request.path_info == new_task_path %>
    <%= f.submit I18n.t('tasks.view.partial.create'), data: { disable_with: I18n.t('tasks.view.partial.creating')} %>
  <% else %>
    <%= f.submit I18n.t('tasks.view.partial.update'), data: { disable_with: I18n.t('tasks.view.partial.updating')} %>
  <% end %>
<% end %>
