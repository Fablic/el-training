<div class="row">
  <div class="col-md-6">
    <h1><%= t('page.task.title.list') %></h1>
  </div>
  <div class="col-md-6">
    <h1><%= link_to "<span class='glyphicon glyphicon-plus'></span> #{t('page.task.link.new')}".html_safe, new_task_path, class: 'btn btn-info' %></h1>
  </div>
</div>

<br><br>

<div class="alert alert-success" role="alert">
  <div class="row">
    <div class="col-md-3">
      <%= link_to "<span class='glyphicon glyphicon-sort-by-order-alt'></span> #{t('page.task.due_date.desc')}".html_safe, tasks_path(due_date_desc: true), class: 'btn btn-success btn-xs' %>
    </div>
    <div class="col-md-3">
      <%= link_to "<span class='glyphicon glyphicon-sort-by-order'></span> #{t('page.task.due_date.asc')}".html_safe, tasks_path(due_date_desc: false), class: 'btn btn-success btn-xs' %>
    </div>
    <div class="col-md-3">
      <%= link_to "<span class='glyphicon glyphicon-sort-by-attributes-alt'></span> #{t('page.task.priority.desc')}".html_safe, tasks_path(priority_desc: true), class: 'btn btn-success btn-xs' %>
    </div>
    <div class="col-md-3">
    <%= link_to "<span class='glyphicon glyphicon-sort-by-attributes'></span> #{t('page.task.priority.asc')}".html_safe, tasks_path(priority_desc: false), class: 'btn btn-success btn-xs' %>
    </div>
  </div>
</div>

<div class="alert alert-info" role="alert">
  <div class="row">
    <div class="col-md-6">
      <%= form_tag({ controller: :tasks, action: :index }, { method: :GET }) do %>
        <%= select_tag 'status', options_for_select([[t('page.task.status.open'), 0],
                                                     [t('page.task.status.inprogress'), 1],
                                                     [t('page.task.status.done'), 2]]),
                                                     prompt: t('page.task.status.prompt') %>
        <%= submit_tag t('page.task.link.search.status'), id: :task_search_status, class: 'btn btn-primary btn-xs' %>
      <% end %>
    </div>
    <div class="col-md-6">
      <%= form_tag({ controller: :tasks, action: :index }, { method: :GET }) do %>
        <%= text_field_tag 'title' %>
        <%= submit_tag t('page.task.link.search.title'), id: :task_search_title, class: 'btn btn-primary btn-xs' %>
      <% end %>
    </div>
  </div>
</div>

<br>

<table class="table table-bordered table-striped table-hover table-condensed">
  <thead>
    <tr>
      <th><%= t('page.task.thead.title') %></th>
      <th><%= t('page.task.thead.description') %></th>
      <th><%= t('page.task.thead.due_date') %></th>
      <th><%= t('page.task.thead.priority') %></th>
      <th><%= t('page.task.thead.status') %></th>
      <th><%= t('page.task.thead.user') %></th>
      <th><%= t('page.task.thead.created_at') %></th>
      <th colspan='3'></th>
    </tr>
  </thead>

  <tbody>
    <% @tasks.each do |task| %>
      <tr>
        <td><b><%= task.title %></b></td>
        <td><%= task.description %></td>
        <td><%= task.due_date %></td>
        <td><%= priority_name(task.priority) %></td>
        <td><%= status_name(task.status) %></td>
        <td><%= task.user.name %></td>
        <td><%= task.created_at %></td>
        <td><%= link_to "<span class='glyphicon glyphicon-zoom-in'></span> #{t('page.task.link.detail')}".html_safe, task, class: 'btn btn-success btn-xs' %></td>
        <td><%= link_to "<span class='glyphicon glyphicon-pencil'></span> #{t('page.task.link.edit')}".html_safe, edit_task_path(task), class: 'btn btn-warning btn-xs' %></td>
        <td><%= link_to "<span class='glyphicon glyphicon-trash'></span> #{t('page.task.link.delete')}".html_safe, task, method: :delete, data: { confirm: t('dialog') }, class: 'btn btn-danger btn-xs' %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
<%= paginate @tasks %>
