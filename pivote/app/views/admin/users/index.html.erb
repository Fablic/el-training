<%= stylesheet_link_tag 'admin/users' %>

<h1><%= t('headline.user.index') %></h1>

<div class="mb-3">
  <%= link_to t('crud.create'), new_admin_user_path, class: 'btn btn-primary' %>
</div>

<div class="mb-3">
  <%= paginate @users %>
  <%= page_entries_info @users %>
</div>

<table class="table table-hover">
  <thead class="thead-default">
    <tr>
      <th><%= User.human_attribute_name(:name) %></th>
      <th><%= User.human_attribute_name(:email) %></th>
      <th class="text-center"><%= User.human_attribute_name(:is_admin) %></th>
      <th><%= t('column.number_of_tasks') %></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= link_to user.name, [:admin, user] %></td>
        <td><%= user.email %></td>
        <td class="text-center"><%= user.is_admin ? '○' : '×' %></td>
        <td><%= link_to_if user.tasks.length > 0, user.tasks.length, admin_user_tasks_path(user) %></td>
        <td>
          <%= link_to t('crud.update'), edit_admin_user_path(user), class: 'btn btn-primary mr-3' %>
          <%= link_to t('crud.delete'), admin_user_path(user), method: :delete, data: { confirm: t('alert.confirm', target: user.name) }, class: 'btn btn-danger' %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
