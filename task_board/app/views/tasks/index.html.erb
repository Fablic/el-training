<div class='container'>
  <h1><%= I18n.t('tasks.title.index') %></h1>
  <div class='row'>
    <div class='col-2'>
      <span class='badge badge-dark'>Search</span>
      <%= search_form_for(@q, url: tasks_path, local: true) do |f| %>
        <div class='form-group'>
          <%= f.label :name %>
          <%= f.search_field :name_cont, class: 'form-control' %>
          <%= f.label :status %>
          <%= f.select :status_eq, Task.statuses_i18n.invert, { include_blank: true }, class: 'form-control' %>
        </div>
        <%= link_to "Clear", request.path, class: "btn btn-default" %>
        <%= f.button '検索', class: 'btn btn-dark' %>
      <% end %>
    </div>

    <div class='col-10'>
      <%= link_to I18n.t('tasks.link.new'), new_task_path, class: 'btn btn-info' %>
      <table class='table'>
        <thead>
          <tr>
            <th scope='col'><%= @tasks.human_attribute_name(:name) %></th>
            <th scope='col'><%= sort_link(@q, :end_date, @tasks.human_attribute_name(:end_date)) %></th>
            <th scope='col'><%= @tasks.human_attribute_name(:status) %></th>
            <th scope='col'><%= @tasks.human_attribute_name(:priority) %></th>
            <th scope='col'> </th>
          </tr>
        </thead>
        <tbody>
          <% @tasks.each do |task| %>
            <tr>
              <td><%= link_to task.name, task %></td>
              <td><%= task.end_date %></td>
              <td><%= task.status_i18n %></td>
              <td><%= task.priority_i18n %></td>
              <td style='display: flex'>
                <%= link_to I18n.t('tasks.link.edit'), edit_task_path(task), class: 'btn btn-primary' %>
                <%= button_to I18n.t('tasks.link.delete'), task_path(task), method: :delete, data: { confirm: I18n.t('tasks.delete_confirm', name: task.name) }, class: 'btn btn-danger' %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
