<div class="container">
  <div class="mt-3">
    <h1 class="text-center"><%= I18n.t('tasks.index.page_title') %></h1>
  </div>
  <div class="mt-5">
    <div class="form-inline">
      <label for="select-sort"><%= I18n.t('tasks.index.sort_order') %></label>
      <select name="select-sort" id="select-sort" class="form-control">
        <option value="1" <%= @sortno != "2" ? "selected" : "" %>><%= I18n.t('tasks.index.sort_create_at') %></option>
        <option value="2" <%= @sortno == "2" ? "selected" : "" %>><%= I18n.t('tasks.index.sort_end_date') %></option>
      </select>
    </div>
    <div class="mt-3">
      <%= search_form_for(@q, url:search_path)  do |f| %>
      <div class="row mt-5">
        <div class="form-group">
          <%= f.label :status_eq, "ステータス" %>
          <%= f.select :status_eq, options_for_select(Task.statuses) %>
        </div>
        <div class="form-group">
          <%= f.label :title_cont, "検索" %>
          <%= f.search_field :title_cont %>
        </div>
        <div class="form-group">
          <%= f.submit "検索" %>
        </div>
      </div>
      <% end %>
    </div>
    <div class="mt-4">
      <table class="table table-bordered">
        <thead class="thead-light">
          <tr>
            <th scope="col"><%= I18n.t('tasks.index.status') %></th>
            <th scope="col"><%= I18n.t('tasks.index.task') %></th>
            <th scope="col"><%= I18n.t('tasks.index.end_date') %></th>
          </tr>
        </thead>
        <tbody>
          <% @tasks.each do |tasks| %>
          <tr>
            <td><%= tasks.status %></td>
            <td><a href="tasks/taskdetail/<%= tasks.id %>"><%= tasks.title %></a></td>
            <td><%= tasks.end_date == nil ? "-" : tasks.end_date.strftime("%Y/%m/%d") %></td>
          </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    <div class="text-right">
      <a class="btn btn-secondary" href="tasks/newtask" role="button"><%= I18n.t('tasks.index.submit_button') %></a>
    </div>
  </div>
</div>
<%= javascript_pack_tag 'task/index' %>
