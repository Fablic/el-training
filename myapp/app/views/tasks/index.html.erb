<h1><%= t :h1_index %></h1>

<%= form_tag('/', method: :get) do -%>
  <%= label_tag t :name %> </br>
  <%= text_field_tag :name, params[:name] %> </br>
  <%= label_tag t :status %> </br>
  <%= select_tag :status, options_for_select(Task.readable_statuses, params[:status]), { include_blank: true } %>
  <%= submit_tag t :form_btn_search %>
<% end %>
</br>

<% if flash[:message].present? %>
<h1><%= flash[:message] %></h1>
<% end %>

<table>
  <tr>
    <th><%= t :name %></th>
    <th><%= t :description %></th>
    <th><%= t :status %></th>
    <th><%= link_sort_by(params, :deadline) %></th>
    <th colspan="3"></th>
  </tr>

  <% @tasks.each do |task| %>
    <tr>
      <td><%= task.name %></td>
      <td><%= task.description %></td>
      <td><%= task.readable_status %></td>
      <td><%= task.readble_deadline %></td>
      <td><%= link_to "#{t :link_detail}", task_path(task) %></td>
      <td><%= link_to "#{t :link_edit}", edit_task_path(task) %></td>
      <td><%= link_to "#{t :link_delete}", task_path(task),
              method: :delete,
              data: { confirm: "#{t :delete_confirm}" } %></td>
    </tr>
  <% end %>
</table>

<%= link_to "#{t :link_new}", new_task_path %>

</br>
<%= paginate @tasks %>
