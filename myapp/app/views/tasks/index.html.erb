<div class="fixed-top">
  <h1><%= t '.title' %></h1>
  <%= link_to '＋', new_task_path, class: "btn btn-primary rounded-circle p-0 btn-add" %>
  <div class="container container-head">
    <div class="row">
      <div class="col">
        <%= form_with url: tasks_path do |f| %>
          <%= f.select :user_id, User.all.map { |user| [user.login_id, search_params(user.id, @status)] }, { include_blank: 'ユーザー選択', selected: search_params(@user_id, @status) }, {class: "custom-select", onchange: "location.href=value;"} %>
        <% end %>
      </div>
      <div class="col">
        <%= link_to '全件', root_path, class: "btn btn-large btn-primary btn-status" %>
      </div>
      <% Task.statuses.each do |k, v| %>
        <div class="col">
          <%= link_to I18n.t("enums.task.status.#{k}"), tasks_path(user_id: @user_id, status: v), class: "btn btn-large btn-secondary btn-status" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
<ul class="list-group">
  <% @tasks.each do |task| %>
    <li class="list-group-item">
      <div class="container" style="padding:10px;">
        <div class="row">
          <div class="col-1">
            <span class="badge badge-secondary"><%= I18n.t("enums.task.status.#{task.status}") %></span>
            <span class="badge badge-secondary"><%= task.user.login_id %></span>
          </div>
          <div class="col">
            <h2>&nbsp;<%= task.title %></h2>
          </div>
          <div class="col-2">
            <%= link_to '編集', edit_task_path(task.id), class: "btn btn-success float-right" %>
            <%= link_to '削除', task_path(task.id), method: :delete, data:{ confirm: '削除します。本当にいいですか？'}, class: "btn btn-danger float-right" %>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <p><%= task.description %></p>
          </div>
        </div>
      </div>
    </li>
  <% end %>
</ul>
<div class="text-center p-3">
  <%= paginate @tasks %>
</div>
