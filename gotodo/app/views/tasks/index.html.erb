<% if controller.class.name.include?('Admin::') %>
  <h3 class="text-center"><%= I18n.t('h', name: @user.name) %></h3>
  <br>
<% end %>

<%= form_with url: tasks_path, method: :get, local: true do |form| %>
  <div class="form-group d-flex">
    <div class="col-md-7">
      <%= form.text_field :title,
                          { value: params[:title], placeholder: Task.human_attribute_name(:title), class: 'form-control' }
      %>
    </div>
    <div class="col-md-2">
      <%= form.select :status,
                      Task.statuses.map { |v, _| [I18n.t("tasks.status.#{v}"), v] },
                      { selected: params[:status], include_blank: Task.human_attribute_name(:status) },
                      { class: 'form-control' }
      %>
    </div>
    <div class="col-md-1">
      <%= form.submit I18n.t('helpers.submit.search'),
                      { class: 'btn btn-outline-info' }
      %>
    </div>
    <div class="ml-auto">
      <%= link_to I18n.t('attributes.new_task'),
                  new_task_path,
                  { class: 'btn btn-info' }
      %>
    </div>
  </div>
<% end %>

<table class="table table-striped text-center">
  <thead class="thead-dark">
    <tr>
      <th><%= sortable :title %></th>
      <th><%= sortable :detail %></th>
      <th><%= sortable :end_date %></th>
      <th><%= sortable :status %></th>
      <th><%= sortable :created_at %></th>
      <th><%= sortable :updated_at %></th>
      <% unless controller.class.name.include?('Admin::') %>
        <th></th>
        <th></th>
      <% end %>
    </tr>
  </thead>
  <tbody>
    <%= render partial: 'tasks/task', collection: @tasks %>
  </tbody>
</table>
<br>
<%= paginate @tasks %>
<br>
<div class="form-group d-flex">
  <div class="ml-auto">
    <%= link_to '管理画面', admin_users_path, { class: 'btn btn-outline-info' } %>
  </div>
</div>
