<p id="notice"><%= notice %></p>

<%= form_tag(root_path, :method => 'get') do %>
  <%= text_field_tag :search_title %>
  <%= select_tag :search_status, options_for_select(I18n.t('tasks.status').invert.merge('All' => ''), selected: '') %>
  <%= submit_tag I18n.t('tasks.common.search'), :name => nil %>
<% end %>

<h1><%= I18n.t('tasks.index.title') %></h1>

<table>
  <thead>
    <tr>
      <th id="title"><%= sort_order 'title', I18n.t('tasks.common.title') %></th>
      <th id="detail"><%= sort_order 'detail', I18n.t('tasks.common.detail') %></th>
      <th id="status"><%= sort_order 'status', I18n.t('tasks.common.status') %></th>
      <th id="priority"><%= sort_order 'priority', I18n.t('tasks.common.priority') %></th>
      <th id="end_date"><%= sort_order 'end_date', I18n.t('tasks.common.end_date') %></th>
      <th id="created_at"><%= sort_order 'created_at', I18n.t('tasks.common.created_at') %></th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @tasks.each_with_index do |task, i| %>
      <tr>
        <td id="title-<%= i %>"><%= task.title %></td>
        <td id="detail-<%= i %>"><%= task.detail %></td>
        <td id="status-<%= i %>"><%= I18n.t("tasks.status.#{task.status}") %></td>
        <td id="priority-<%= i %>"><%= task.priority %></td>
        <td id="end_date-<%= i %>"><%= task.end_date %></td>
        <td id="created_at-<%= i %>"><%= task.created_at.strftime('%Y-%m-%d %H:%M:%S') %></td>
        <td><%= link_to I18n.t('tasks.common.show'), task %></td>
        <td><%= link_to I18n.t('tasks.common.edit'), edit_task_path(task) %></td>
        <td><%= link_to I18n.t('tasks.common.destroy'), task, method: :delete, data: { confirm: I18n.t('tasks.index.confirm') } %></td>
      </tr>
    <% end %>
    <%= paginate @tasks %>
  </tbody>
</table>

<br>

<%= link_to I18n.t('tasks.index.new_submit'), new_task_path %>
